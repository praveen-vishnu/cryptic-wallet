<ion-header no-border>
  <ion-navbar>
    <ion-title text-center>
      <div class="logo logo--header">
        <img [src]="coin.imageUrl">
      </div>
    </ion-title>
  </ion-navbar>
  <ion-toolbar>
    <h1 class="coin-title" text-center>{{coin.name}}</h1>
    <small class="coin-market-cap" text-center>
      € {{coin.currencies.eur.marketcap | numberFormatter}}
    </small>
    <div class="coin-price" text-center>
      <div class="currency">
        <span class="currency__symbol">€</span>
        <span class="currency__number">{{coin.currencies.eur.price | numberFormatter: 'price'}}</span>
      </div>
    </div>
    <!-- TODO: fix formatting -->
    <div text-center class="price-change" [ngClass]="{'negative' : detectChange(coin.currencies.eur.change)}">
      <div class="percentage">
        <span class="percentage__number">{{coin.currencies.eur.change | numberFormatter: 'perc'}}</span>
        <span class="percentage__symbol">%</span>
      </div>
    </div>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div #segment class="chart-segment">
    <ion-segment [(ngModel)]="chartMode" (ionChange)="chartModeChanged($event)">
      <ion-segment-button value="day">
        D
      </ion-segment-button>
      <ion-segment-button value="week">
        W
      </ion-segment-button>
      <ion-segment-button value="month">
        M
      </ion-segment-button>
      <ion-segment-button value="year">
        Y
      </ion-segment-button>
      <ion-segment-button value="all">
        All
      </ion-segment-button>
    </ion-segment>
  </div>
  <div #timestamp class="chart-timestamp" text-center><span class="date">{{priceDate}}</span></div>
  <!--<div class="chart-wrapper">-->
  <!--TODO Fix api with subclassing-->
  <!--<ngx-chart [data]="data" (price)="updatePrice($event)" (date)="updateDate($event)"></ngx-chart>-->
  <chartjs [data]="data" (price)="updatePrice($event)" (date)="updateDate($event)"
           [style.height]="calculateChartHeight"></chartjs>
  <!--</div>-->
</ion-content>
